"use strict";(self.webpackChunkreact_pizza_shop=self.webpackChunkreact_pizza_shop||[]).push([[225],{1100:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var a=r(2791),n=r(7689),o=r(1087),s="SuccessPaymentBlock_root__OtvQ8",c="SuccessPaymentBlock_button__SHp7l";var i=r.p+"static/media/cart_happy_face_emoji_emotion_smile_icon.26154ae7e18e97d5885985982ac8ea1a.svg";function u(e,t){return Math.floor(Math.random()*(t-e)+e)}var l=function(e,t){return"abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())]+u(e,t).toString()+u(e,t).toString()+u(e,t).toString()},d=r(1210),m=r(9434),h=r(6707),f=r(9085),g=r(2409),v=r(4371),S=r(184),p=function(){var e=(0,m.I0)(),t=(0,m.v9)(f.K).totalPrice,r=(0,n.TH)().pathname,u=(0,v.a)().isAuth,p=(0,n.s0)(),_=(0,a.useRef)(l(1,100)),j=(0,a.useRef)("true"===localStorage.getItem("didMount")),x=(0,a.useRef)(Math.round(t/100));(0,a.useEffect)((function(){var a=new Date,n=a.toLocaleDateString("en-GB"),o=a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if("/success_payment"===r)if(j.current)localStorage.removeItem("didMount"),p("/");else{if(e((0,h.H5)()),u){var s=JSON.parse(localStorage.getItem("currentUser"));s.bonus+=x.current;var c={date:n,time:o,numberOfOrder:_.current,totalPrice:t,bonusForOrder:x.current,items:s.cart,status:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"};s.cart=[],s.orders.push(c),localStorage.setItem("currentUser",JSON.stringify(s)),e((0,g.fS)(c)),localStorage.removeItem("bonus");var i=s.email,l=JSON.parse(localStorage.getItem("users")).map((function(t){return t.email===i&&(t.bonus=s.bonus,e((0,g.v_)(s.bonus)),t.cart=[],t.orders.push(c)),t}));localStorage.setItem("users",JSON.stringify(l))}else localStorage.removeItem("cart");j.current=!0,localStorage.setItem("didMount","true")}}),[]);return(0,S.jsxs)("h2",{className:s,children:[(0,S.jsx)("div",{children:(0,S.jsx)("img",{src:i,alt:"smile_face"})}),(0,S.jsx)("div",{children:"\u0423\u0440\u0430! \u041e\u043f\u043b\u0430\u0442\u0430 \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"}),(0,S.jsxs)("div",{children:["\u041d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",(0,S.jsx)("span",{children:_.current})]}),u&&(0,S.jsxs)("div",{children:["\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0431\u043e\u043d\u0443\u0441\u043e\u0432 \u0437\u0430 \u0437\u0430\u043a\u0430\u0437: ",(0,S.jsx)("span",{children:x.current})]}),(0,S.jsx)("div",{children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0443\u0436\u0435 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c!"}),(0,S.jsx)("div",{children:(0,S.jsx)("span",{children:"\u041f\u0440\u0438\u044f\u0442\u043d\u043e\u0433\u043e \u0430\u043f\u043f\u0435\u0442\u0438\u0442\u0430!"})}),(0,S.jsx)("div",{className:c,children:(0,S.jsx)(o.rU,{to:"/",children:(0,S.jsx)(d.Z,{onRemoveDidMount:function(){localStorage.removeItem("didMount")}})})})]})},_=function(){return(0,S.jsx)(p,{})}}}]);
//# sourceMappingURL=SuccessPayment.b49ff35e.chunk.js.map